<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="lv" lang="lv">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Dagnija</title>
</head>
<body onload="main()">



<img src="sheet.gif" id="sheet"/>

<div id="playButton" class="button" onclick="play()">play</div>
<div id="pauseButton" class="button" onclick="pause()">pause</div>
<div id="stopButton" class="button" onclick="stop()">stop</div>





<script>

var offsetX = 500;
var splitTime
var musicTime = 20 // sec 

function main(){
	console.log("Lapa ielādējās");
	splitTime = new Date().getTime()
	// window.requestAnimationFrame(loop);
}



function loop(){
var sheet = document.getElementById("sheet");
	var date = new Date().getTime()
	
	var deltaTime = date-splitTime
splitTime = date
	
var move = (deltaTime/1000)*(sheet.width/musicTime)
console.log(move)
offsetX -= move;
	sheet.style.left = offsetX+"px"
	window.requestAnimationFrame(loop)

}

function play(){
	console.log("Spēlējam skaņdarbu");
	var sheet = document.getElementById("sheet");
	offsetX -= 1;
	sheet.style.left = offsetX+"px";
	window.requestAnimationFrame(loop);
}

function pause(){
	console.log("Skaņdarbs ir nopauzēts");
	var sheet = document.getElementById("sheet");
	offsetX = 0;
	sheet.style.left = offsetX+"px";
	}

function stop(){
	console.log("Skaņdarbs ir apturēts");
	var sheet = document.getElementById("sheet");
	
	sheet.style.left = offsetX;
}

</script>




<style>
#sheet {
	position: absolute;
	left: 50px;
	top: 150px;
	border: 1px solid black;
}
.button {
	position: absolute;
	top: 20px;
	border: 1px solid blue;
	width: 50px;
	height: 50px;
}
#playButton {
	left: 50px;
}
#pauseButton {
	left: 120px;
}
#stopButton {
	left: 190px;
}


</style>


</body>
</html>